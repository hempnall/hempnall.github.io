---
layout: post
title: Docker Cheat Sheet
date: '2015-02-28T02:17:00.000-08:00'
author: James Hook
tags: 
modified_time: '2015-02-28T02:17:39.288-08:00'
blogger_id: tag:blogger.com,1999:blog-5482187274444893467.post-9215759797196979085
blogger_orig_url: http://computer-says-yes.blogspot.com/2015/02/docker-cheat-sheet.html
---

Loving docker - and wanting to use it as much as possible . But if I don't use it for a week or two then I forget all the commands - so I need to write them down.<br /><br />On Mac OS X you need to use "boot2docker" and access the docker containers through VirtualBox.<br /><br />Dockerfiles are a recipe for creating a new Docker container.<br /><div class="p1"><blockquote class="tr_bq"><span style="font-family: Courier New, Courier, monospace;"><span class="s1">FROM ubuntu:14.04</span>&nbsp;&nbsp;</span></blockquote><blockquote class="tr_bq"><span style="font-family: Courier New, Courier, monospace;">RUN apt-get update &amp;&amp; apt-get -y install build-essential python-dev libpython2.7-dev cmake zlib1g-dev flex bison libssl-dev swig&nbsp; libpcap-dev&nbsp;</span></blockquote><blockquote class="tr_bq"><span style="font-family: Courier New, Courier, monospace;"><span class="s1">ADD bro-2.3.1.tar.gz /build</span>&nbsp;</span></blockquote><blockquote class="tr_bq"><span style="font-family: Courier New, Courier, monospace;"><span class="s1">WORKDIR /build/bro-2.3.1</span>&nbsp;</span></blockquote><blockquote class="tr_bq"><span class="s1" style="font-family: Courier New, Courier, monospace;">RUN ./configure &amp;&amp; make &amp;&amp; make install</span></blockquote>&nbsp;Note:<br /><ul><li>It is necessary to run apt-get update .</li><li>ADD'ing a tar ball unzips it when it hits the container</li><li>You need to WORKDIR to set the working directory - RUN'ing cd doesn't work</li><li>first time you use the ubuntu image it downloads it which is time consuming :-(</li></ul><div>You can build this using the "docker build" command</div><div><br /></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">bash-3.2$ docker build -t bro2/v2 .</span></span></div><div>(note: "bro2/v2" is called the tag name)<br /><br />Running a container:<br /><br /><pre class="prettyprint well" style="background-color: #fcfcfc; border-radius: 4px; border: 1px solid rgb(227, 227, 227); color: #333333; font-family: Monaco, Consolas, 'Lucida Console', monospace; font-size: 12px; line-height: 1.5; margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;"><code style="background-color: transparent; border-radius: 3px; border: 0px; color: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; overflow-wrap: normal; padding: 0px; white-space: pre;"><span class="pln" style="color: #48484c;">$ docker run </span><span class="pln" style="color: #48484c;"> </span><span class="pun" style="color: #93a1a1;">-</span><span class="pln" style="color: #48484c;">i </span><span class="pun" style="color: #93a1a1;">-</span><span class="pln" style="color: #48484c;">t ubuntu </span><span class="pun" style="color: #93a1a1;">/</span><span class="pln" style="color: #48484c;">bin</span><span class="pun" style="color: #93a1a1;">/</span><span class="pln" style="color: #48484c;">bash</span></code></pre><div>(Note: the -i -t is necessary!! - if you want to interact with your container, also -d to run in daemon mode)&nbsp;</div><div><br /></div><div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">bash-3.2$ docker run -t -i hempnall/elk &nbsp; /bin/bash</span></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">root@8feca692f88a:/tmp/elasticsearch-1.1.1#&nbsp;</span></span></div></div><div><br /></div><div>Docker attach:</div><div><br /></div><div><br /></div><div>Listing docker images:</div><div><br /></div><span style="font-family: 'Courier New', Courier, monospace;">bash-3.2$ docker images</span><br />(Note: REPOSITORY: the tag name used in the "build" command)<br /><br /><pre style="background: rgb(253, 246, 227); border: 0px; color: #000305; font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace !important; font-size: 14px; line-height: 1.45em; outline: 0px; overflow-x: auto; overflow-y: hidden; padding: 0.8em !important; vertical-align: baseline;"><span class="c" style="background: transparent; border: 0px; color: #93a1a1; font-style: italic; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;"># Delete all containers</span><br />docker rm <span class="k" style="background: transparent; border: 0px; color: #859900; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">$(</span>docker ps -a -q<span class="k" style="background: transparent; border: 0px; color: #859900; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">)</span><br /><span class="c" style="background: transparent; border: 0px; color: #93a1a1; font-style: italic; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;"># Delete all images</span><br />docker rmi <span class="k" style="background: transparent; border: 0px; color: #859900; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">$(</span>docker images -q<span class="k" style="background: transparent; border: 0px; color: #859900; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">)</span></pre><br /><br />Startup apps&nbsp;</div><div><br /></div><div>Joining ports<br /><br />Fig</div><div><br /></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">bash-3.2$ boot2docker ip</span></span></div><div><div class="p2"><span style="font-family: Courier New, Courier, monospace;"><span class="s1"></span><br /></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">The VM's Host only interface IP address is: 192.168.59.103</span></span></div></div><br /><div><br /></div><div>Useful side "things"</div><div><ul><li>&nbsp;supervisor</li></ul></div><div><br /></div></div>